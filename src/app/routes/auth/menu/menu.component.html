<page-header title="菜单" [action]="phActionTpl">
  <ng-template #phActionTpl>
    <button nz-button (click)="getData(pMenuId)">刷新</button>
    <button nz-button nzType="primary" (click)="add()">新建</button>
    <button nz-button nzType="primary" (click)="sort()" [disabled]="dissort">排序</button>
  </ng-template>
</page-header>
<sf #sf mode="search" [schema]="schema" [ui]="ui" [formData]="i" button="none">
  <button nz-button nzType="text" (click)="reload()">
    <i nz-icon nzType="reload" nz-popover nzPopoverContent="刷新选项"></i>
  </button>
</sf>
<st #st [data]="stData" [columns]="columns" [scroll]="scroll">
  <ng-template st-row="name" let-item>
    <a nz-button nzType="link" nz-popover nzPopoverTrigger="click" [nzPopoverContent]="editButton">
      {{ item.config.text }}
    </a>
    <ng-template #editButton>
      <a nz-button nzType="link" (click)="edit(item, false)">编辑</a>
      <a nz-button nzType="link" (click)="edit(item, true)">复制</a>
      <a nz-button nzType="link" (click)="log(item)">变更历史</a>
    </ng-template>
  </ng-template>
  <ng-template st-row="icon" let-item let-index="index">
    <ng-container *ngIf="!item.config.icon">无</ng-container>
    <ng-container *ngIf="item.config.icon">
      <i nz-icon class="icon" [nzType]="item.config.icon" nzTheme="outline" nz-tooltip [nzTooltipTitle]="item.config.icon"></i>
    </ng-container>
  </ng-template>
</st>
